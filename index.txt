<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
  <meta name="theme-color" content="#ff8a3d"/>
  <meta name="description" content="Jiasa - 用滑的找餐廳"/>
  <link rel="manifest" href="manifest.json"/>
  <link rel="apple-touch-icon" href="assets/icon-192.png"/>
  <title>Jiasa</title>
  <!-- ✅ 移除硬編碼的 Google Maps SDK，改由 app.js 動態載入 -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- 啟動畫面 -->
  <div class="splash-screen" id="splashScreen">
    <div class="splash-logo-container">
      <div class="splash-icon-wrapper">
        <img src="assets/bowl.png" class="splash-bowl" alt="碗">
        <img src="assets/arrow.png" class="splash-arrow" alt="箭頭">
      </div>
      <img src="assets/jiasa-text.png" class="splash-wordmark" alt="Jiasa">
    </div>
  </div>

  <!-- App 主體 -->
  <div class="phone">
    <header>
      <h1><img src="assets/Jiasa_headerlogowordmark.png" alt="Jiasa"/></h1>
    </header>
    
    <!-- 卡片滑動主畫面 -->
    <main id="swipe">
      <div class="stack" id="stack"></div>
      <div class="controls">
        <button class="btn" id="btnUndo" disabled aria-label="撤回上一個選擇">↩︎ <span data-i18n="undo">撤回</span></button>
        <button class="btn secondary" id="btnSkip" aria-label="略過這家餐廳" data-i18n="skip">略過</button>
        <button class="btn primary" id="btnChoose" aria-label="選擇這家餐廳" data-i18n="choose">選這家</button>
      </div>
      <div class="hint" id="hintKeys" data-i18n="hintKeys">提示：可以左右滑動卡片</div>
    </main>
    
    <!-- 底部導航列 -->
    <nav class="bottom-nav" role="navigation" aria-label="主要導航">
      <button class="nav-item active" id="navHome" aria-label="首頁">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><path d="M9 22V12h6v10"/></svg>
        <span class="nav-label" data-i18n="navHome">首頁</span>
      </button>
      <button class="nav-item" id="navFavs" aria-label="收藏清單">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
        <span class="nav-label" data-i18n="navFavorites">收藏</span>
      </button>
      <button class="nav-item" id="navRefresh" aria-label="重新搜尋">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M23 4v6h-6M1 20v-6h6"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
        <span class="nav-label" data-i18n="navRefresh">刷新</span>
      </button>
      <button class="nav-item" id="navHistory" aria-label="瀏覽歷史">
        <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="9"/><path d="M12 7v5l3 2"/></svg>
        <span class="nav-label" data-i18n="navHistory">歷史</span>
      </button>
      <button class="nav-item" id="navSettings" aria-label="設定">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.2 7.2 0 0 0-1.63-.94l-.36-2.54a.5.5 0 0 0-.5-.42h-3.84a.5.5 0 0 0-.5.42l-.36 2.54c-.58.24-1.12.55-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L2.65 8.84a.5.5 0 0 0 .12.64l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94L2.77 14.52a.5.5 0 0 0-.12.64l1.92 3.32a.5.5 0 0 0 .6.22l2.39-.96c.51.39 1.05.7 1.63.94l.36 2.54c.05.24.26.42.5.42h3.84c.24 0 .45-.18.5-.42l.36-2.54c.58-.24 1.12-.55-1.63.94l2.39.96a.5.5 0 0 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58z"/><circle cx="12" cy="12" r="3.2"/></svg>
        <span class="nav-label" data-i18n="navSettings">設定</span>
      </button>
    </nav>
  </div>

  <!-- 設定 Modal -->
  <div class="overlay" id="overlay" aria-hidden="true"></div>
  <div aria-modal="true" class="modal" id="modal" role="dialog" aria-labelledby="modalTitle">
    <div class="modal-header">
      <div class="label" id="modalTitle" data-i18n="settings">設定</div>
      <button aria-label="關閉設定" class="iconbtn" id="btnClose">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M18 6L6 18M6 6l12 12"></path></svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="section">
        <div class="filter-actions">
          <div class="label" style="margin:0;" data-i18n="lblFilters">篩選條件</div>
          <button class="clear-filters" id="btnClearFilters" data-i18n="clearFilters">清除全部</button>
        </div>
        <div class="field-group">
          <div class="label" data-i18n="lblDistance">搜尋距離</div>
          <div class="pill-group" id="distancePills" role="group" aria-label="選擇搜尋距離"></div>
        </div>
        <div class="field-group">
          <div class="label" data-i18n="lblCategory">類型</div>
          <div class="pill-group" id="categoryPills" role="group" aria-label="選擇餐廳類型"></div>
        </div>
      </div>
      <div class="section">
        <label class="label" for="langSelModal" data-i18n="language">語言</label>
        <select class="select" id="langSelModal" aria-label="選擇語言">
          <option value="zh">繁體中文</option>
          <option value="en">English</option>
        </select>
      </div>
      <div class="section">
        <label class="label" for="themeSelect" data-i18n="theme">主題</label>
        <select class="select" id="themeSelect" aria-label="選擇主題">
          <option value="classic">Classic</option>
          <option value="mocha">Mocha</option>
          <option value="olive">Olive</option>
          <option value="sakura">Sakura</option>
        </select>
      </div>
      <div style="display:flex; margin-top:12px; justify-content:flex-end;">
        <button class="btn primary" id="applySettings" style="width:auto;">
          <span data-i18n="apply">套用</span>
        </button>
      </div>
    </div>
  </div>

  <!-- 收藏與歷史 Modal (結構暫留) -->
  <div class="overlay" id="favOverlay" aria-hidden="true"></div>
  <div aria-modal="true" class="modal" id="favModal" role="dialog"></div>
  <div class="overlay" id="histOverlay" aria-hidden="true"></div>
  <div aria-modal="true" class="modal" id="histModal" role="dialog"></div>

  <script type="module" src="/js/app.js"></script>
</body>
</html>
